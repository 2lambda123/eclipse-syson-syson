= 2024.9.0 (work in progress)

== Key highlights

- *Model conformance to SysMLv2 Beta 2 version*: The metamodel has been modified to conform to SysMLv2 Beta 2 specification released on the 3rd of February 2024(see https://www.omg.org/spec/SysML/ for more details) and KerML Beta 2 specification released on the 17the of February 2024(see https://www.omg.org/spec/KerML/ for more details).

== Breaking changes

- Move _StateTransitionCompartmentNodeDescriptionProvider_ from syson-diagram-statetransition-view to module syson-diagram-common-view.
- Code refactoring:
* Rename `ExhibitStatesCompartmentItemNodeDescriptionProvider` to `StatesCompartmentItemNodeDescriptionProvider`.
* _StatesCompartmentNodeDescriptionProvider_ now handles both exhibit and non-exhibit states.
- Align metamodel to SysMLv2 Beta 2 specification released on the 3rd of February 2024(see https://www.omg.org/spec/SysML/ for more details) and KerML Beta 2 specification released on the 17the of February 2024(see https://www.omg.org/spec/KerML/ for more details).
You may have to fix your existing SysON models/projects by your own means to still be able to open them with SysON.
Please download all your models/projects before upgrading to 2024.9.0.
The changes are:
* AnnotatingElement
** add derived reference "ownedAnnotatingRelationship : Annotation"
* Annotation
** add derived reference "owningAnnotatingElement : AnnotatingElement"
* Connector
** remove attribute "isDirected : boolean"
* OperatorExpression
** remove derived reference "operand : Expression"
* ParameterMembership
** add operation "parameterDirection()  : FeatureDirectionKind"
* Type
** add operation "directionOfExcluding(Feature, Type[0..\*]) : FeatureDirectionKind"
- Refactor and simplify the implementation of the Interconnection View diagram, the following classes have been deleted, renamed, or merged:
* Deleted `InterconnectionViewForDefinitionDescriptionProvider`
* Deleted `InterconnectionViewForDefinitionDiagramDescriptionProvider`
* Deleted `InterconnectionViewForUsageDiagramDescriptionProvider`
* Merged `RootUsageNodeDescriptionProvider` and `RootDefinitionNodeDescriptionProvider` into `RootNodeDescriptionProvider`
* Renamed `FirstLevelChildPartUsageNodeDescriptionProvider` to `FirstLevelChildUsageNodeDescriptionProvider`
* Renamed `ChildPartUsageNodeDescriptionProvider` to `ChildUsageNodeDescriptionProvider`
- Switch to Sirius Web 2024.7.1: all diagrams must be deleted and created again, due to the fix of this Sirius Web https://github.com/eclipse-sirius/sirius-web/issues/1470[bug].
- Add tool to create an ExhibitState from a StateUsage, the following classes & methods have been deleted or modified to simplify the handling of _ExhibitStates_
* Deleted `StateTransitionToggleExhibitStateToolProvider`
* Deleted `UtilService#canBeExhibitedStateUsage`
* Deleted `UtilService#setUnsetAsExhibit`
* Deleted `UtilService#isExhibitedStateUsage`
* Deleted `UtilService#getAllReachableStatesWithoutReferencialExhibitExpression`
* Deleted `ViewNodeService#isHiddenByDefaultExhibitStates`
* Deleted `ViewNodeService#isHiddenByDefaultNonExhibitStates`
* Add new `IViewDiagramElementFinder` parameter to `StateTransitionViewNodeToolSectionSwitch`

== Dependencies update

- Switch to Sirius Web 2024.7.5
- Switch to `maven-checkstyle-plugin` 3.4.0
- Switch to Spring Boot 3.3.1
- Add a dependency to CycloneDX to compute the backend software bill of materials during the build

== Bug fixes

- Prevent nested part to be rendered as border nodes in the Interconnection View diagram.
- Fix an issue where a click on inherited members inside compartments was raising an error instead of displaying the palette.


== Improvements

- Add actions in _PartUsage_ and _PartDefinition_
- Add states in _PartUsage_ and _PartDefinition_
- Add _ExhibitStates_ on General View diagram
- Allow the creation of a StateTransitionView diagram on a _PartUsage_/_PartDefinition_
- Allow the creation of a StateTransitionView diagram on a _StateUsage_/_StateDefinition_
- The _InterfaceUsage_ created by the New Interface edge tool in the Interconnection View diagram are now created under closest containing _Definition_/_Package_.
- Simplify the implementation of the Interconnection View diagram and remove duplicated code
- Add action node in Interconnection View diagram
- Add documentation and action flow compartments for action nodes in the Interconnection View diagram
- Add label support for referential Usages
* Nodes that are references now correctly contain the "ref" keyword
* Elements in lists that are references now correctly contain the "ref" keyword
* AttributeUsage do not contain the "ref" keyword since they are always referential
- Add support for "ref" keyword in direct edit
* Prefixing the name of an Usage with "ref" sets it as a reference
* Not setting the "ref" prefix of an Usage sets it as a composite (non-reference)
- Use empty diamond source style for nested reference usage edge
* Nested usages that are composite are connected by a filled diamond edge
* Nested usages that are references are connected by an empty diamond edge

image::release-notes-reference-nested-usages.png[Nested Usage edge for composite and reference Usage]

- Modify the creation of an _ExhibitState_ from a _StateUsage_ or _StateDefinition_.
There is now several tools for creating an _ExhibitState_.
The first one called "New ExhibitState" creates a simple _ExhibitState_.
The second one called "New ExhibitState with referenced State" shows a dialog allowing to select an existing _State_ to associate to the new _ExhibitState_.
- Display qualified names in diagrams nodes' labels in case of standard libraries elements.

image::release-notes-diagram-standard-libraries-elements-qualified-names.png[Qualified names for standard libraries elements]

== New features

- Add "Show/Hide Icons in Diagrams" action in Diagram Panel, allowing to show/hide icons in the  diagrams (icons are not part of the SysMLv2 specification).

image::release-notes-show-hide-icons-in-diagram.png[Show/Hide Icons in Diagram]

- Add new tools allowing to create an _ExhibitState_ at the root of General View and StateTransition View.
The first one called "New ExhibitState" creates a simple _ExhibitState_.
The second one called "New ExhibitState with referenced State" shows a dialog allowing to select an existing _State_ to associate to the new _ExhibitState_.
The selected _State_ will be added to the diagram, not the new _ExhibitState_.
- Handle _FlowConnectionUsage_ between _PortUsages_ in Interconnection View.
A new edge tool allows to create a flow between two ports.
- Add tools to set a _Feature_ as composite or reference.
- Handle _ItemUsage_ in Interconnection View and _FlowConnectionUsage_ using items as their source/target.
- Add documentation property to Core tab of the Details view, allowing to add/edit a documentation for the selected element.
This property widget will only handle the first documentation associated to the selected element.
If no documentation is associated to the selected element, then a new value in this widget will also create a _Documentation_ element and will associate it to the selected element.